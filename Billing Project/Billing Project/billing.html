<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RG TEA SHOP - Billing</title>
    <!-- Google Fonts - Unique Font Style -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Playfair+Display:wght@400;700;900&display=swap" rel="stylesheet">
    <!-- jsPDF library for PDF export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>

</head>
<body>
    <div class="container">
        <header>
            <h1>RG TEA SHOP</h1>
            <nav>
                <a href="#" class="nav-link active" onclick="showBilling()">Billing</a>
                <a href="#" class="nav-link" onclick="showManageMenu()">Manage Menu</a>
                <a href="#" class="nav-link" onclick="showSalesReport()">Sales Report</a>
            </nav>
        </header>

        <!-- Billing Section -->
        <div id="billingSection" class="billing-main">
            <div class="menu-section">
                <h2>Menu</h2>
                <div class="menu-grid" id="menuGrid">
                    <!-- Menu items will be loaded here -->
                </div>
            </div>

            <div class="cart-section">
                <div class="cart-header">
                    <h2>Cart</h2>
                    <button class="btn-clear" onclick="clearCart()">Clear Cart</button>
                </div>
                <div class="cart-items" id="cartItems">
                    <p class="empty-cart">Cart is empty</p>
                </div>
                <div class="cart-footer">
                    <div class="cart-total">
                        <strong>Total: ₹<span id="cartTotal">0.00</span></strong>
                    </div>
                    <div class="cart-actions">
                        <button class="btn btn-primary" onclick="showQRCode()">Pay Now</button>
                        <button class="btn btn-secondary" onclick="printBill()">Print Bill</button>
                        <button class="btn btn-secondary" onclick="downloadBillPDF()" style="background: rgba(40, 167, 69, 0.7); border: 1px solid rgba(255, 255, 255, 0.3);">Download PDF</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Manage Menu Section (hidden by default) -->
        <div id="manageMenuSection" style="display: none;">
            <div style="background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); padding: 20px; border-radius: 20px; box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37); border: 1px solid rgba(255, 255, 255, 0.5);">
                <h2 style="color: #000; margin-bottom: 20px; font-weight: 600;">Menu Management</h2>
                <button class="btn btn-primary" onclick="showAddItemForm()" style="margin-bottom: 20px;">Add New Item</button>
                <div id="menuTableContainer"></div>
            </div>
        </div>

        <!-- Sales Report Section (hidden by default) -->
        <div id="salesReportSection" style="display: none;">
            <div style="background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); padding: 20px; border-radius: 20px; box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37); border: 1px solid rgba(255, 255, 255, 0.5);" class="no-print">
                <h2 style="color: #000; margin-bottom: 20px; font-weight: 600;">Sales Report</h2>
                <div style="margin-bottom: 20px; display: flex; flex-wrap: wrap; gap: 10px; align-items: flex-end;">
                    <div style="flex: 1; min-width: 150px;">
                        <label style="color: #000; display: block; margin-bottom: 5px; font-weight: 600;">Start Date:</label>
                        <input type="date" id="startDate" style="width: 100%; padding: 8px; border-radius: 8px; border: 1px solid rgba(0, 0, 0, 0.3); background: rgba(255, 255, 255, 0.9); color: #000;">
                    </div>
                    <div style="flex: 1; min-width: 150px;">
                        <label style="color: #000; display: block; margin-bottom: 5px; font-weight: 600;">End Date:</label>
                        <input type="date" id="endDate" style="width: 100%; padding: 8px; border-radius: 8px; border: 1px solid rgba(0, 0, 0, 0.3); background: rgba(255, 255, 255, 0.9); color: #000;">
                    </div>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap; width: 100%; margin-top: 10px;">
                        <button class="btn btn-primary" onclick="loadSalesReport()" style="flex: 1; min-width: 140px;">Generate Report</button>
                        <button class="btn btn-secondary" onclick="printSalesReport()" id="printReportBtn" disabled style="flex: 1; min-width: 140px;">Print Report</button>
                        <button class="btn btn-secondary" onclick="downloadPDFReport()" id="downloadPDFBtn" disabled style="flex: 1; min-width: 140px; background: rgba(40, 167, 69, 0.7); border: 1px solid rgba(255, 255, 255, 0.3);">Download PDF</button>
                    </div>
                </div>
                <div id="salesReportContent" style="color: #000;"></div>
            </div>
        </div>
    </div>

    <!-- QR Code Modal -->
    <div id="qrModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeQRModal()">&times;</span>
            <h2>Payment QR Code</h2>
            <p class="payment-amount">Amount: ₹<span id="paymentAmount">0.00</span></p>
            <div class="qr-code-container">
                <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <rect width="100" height="100" fill="white"/>
                    <rect x="10" y="10" width="20" height="20" fill="black"/>
                    <rect x="70" y="10" width="20" height="20" fill="black"/>
                    <rect x="10" y="70" width="20" height="20" fill="black"/>
                    <rect x="35" y="35" width="30" height="30" fill="black"/>
                    <text x="50" y="55" text-anchor="middle" fill="white" font-size="8">QR</text>
                </svg>
            </div>
            <p class="payment-note">Scan the QR code to complete payment</p>
            <button class="btn btn-primary" onclick="completePayment()">Payment Complete</button>
        </div>
    </div>

        <!-- Bill Print Template (hidden) -->
        <div id="billPrint" class="bill-print" style="display: none;">
            <div class="bill-header">
                <h2>RG TEA SHOP</h2>
                <p>Bill Receipt</p>
            </div>
            <div class="bill-info">
                <p><strong>Date:</strong> <span id="billDate"></span></p>
                <p><strong>Time:</strong> <span id="billTime"></span></p>
            </div>
            <table class="bill-table">
                <thead>
                    <tr>
                        <th>Item</th>
                        <th>Qty</th>
                        <th>Price</th>
                        <th>Total</th>
                    </tr>
                </thead>
                <tbody id="billItems">
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="3"><strong>Grand Total</strong></td>
                        <td><strong>₹<span id="billTotal">0.00</span></strong></td>
                    </tr>
                </tfoot>
            </table>
            <div class="bill-footer">
                <p>Thank you for your visit!</p>
            </div>
        </div>

        <!-- Sales Report Print Template (hidden) -->
        <div id="salesReportPrint" class="sales-report-print" style="display: none;">
            <div class="report-print-header">
                <h2>RG TEA SHOP</h2>
                <p>Sales Report</p>
            </div>
            <div class="report-print-info">
                <p><strong>Report Period:</strong> <span id="reportPeriod"></span></p>
                <p><strong>Generated On:</strong> <span id="reportGeneratedDate"></span></p>
            </div>
            <div class="report-print-summary">
                <div class="summary-item">
                    <strong>Total Revenue:</strong> ₹<span id="printTotalRevenue">0.00</span>
                </div>
                <div class="summary-item">
                    <strong>Total Orders:</strong> <span id="printTotalOrders">0</span>
                </div>
            </div>
            <h3 class="report-section-title">Item-wise Sales</h3>
            <table class="report-print-table">
                <thead>
                    <tr>
                        <th>Item Name</th>
                        <th>Quantity Sold</th>
                        <th>Revenue</th>
                    </tr>
                </thead>
                <tbody id="printItemWiseTable">
                </tbody>
            </table>
            <div class="report-print-footer">
                <p>End of Report</p>
            </div>
        </div>


</body>
</html>